# Cabify



## Авторы - студенты СГН3-44Б: 

> Жирняков Владислав Михайлович (backend-разработчик)        
> Чистяков Константин Максимович (frontend-разработчик)


Лабораторная работа выполняется в рамках обучения сбору данных по API, для создания веб-сайта «**Cabify**», цель которого - создание прогнозной оценки цен на такси по районам Москвы на основе данных о погоде, данных о пробках и востребованности такси в данном районе.

Задача проекта - провести анализ влияния погодных условий и уровня пробок на тарифы такси в различных районах Москвы.

## Функциональные требования

- [ ] Доступ к данному веб-ресурсу осуществляется без указания логина и пароля пользователя, т.е. без регистрации.
- [ ] Обеспечение доступа к актуальным картографическим данным.
- [ ] Предоставление функционала выбора района и времени.
- [ ] Возможность указания на карте или в отдельной строке начальной и конечной точек пути.
- [ ] Добавление на карту слоя с пробками после нажатия на соответствующую кнопку на сайте.
- [ ] Расчет стоимости: система по API запрашивает данные у сервиса такси и выдает рассчитанную стоимость такси на странице.

## Технологический стек 

В ходе разработки веб-сервиса «Cabify» были использованы такие инструменты разработки как:
- [ ] Python (для получения данных по API и инициализации базы данных)
- [ ] С# (для написания backend-части проекта)
- [ ] JS React (для написания frontend-части проекта)
- [ ] MongoDB (для сохранения и визуализации полученных данных)
- [ ] Figma (для проектирования UX/UI)


## Cбор данных

Для сбора данных о погоде был выбран сайт https://www.weather.visualcrossing.com, к данным с которого мы получали доступ по API key. Сайт предоставляет данные о погоде в нынешний момент времени в выбранном регионе. 

Информация с сайта хранится в базе данных Weather_DB, расположенной локально, доступ к которой осуществляется через MongoDB. В Weather_DB содержатся данные о широте и долготе выбранного региона, текстовое описание прогноза погоды до конца дня, прогноз погоды на 2 недели, информация о метеорологических станциях и текущие погодные условия, такие как: время, температура, скорость ветра, давление, видимость, солнечная активность, погодные условия (например, туман).

## Алгоритм работы написанного кода для API

1. Создаем подключение к локальному серверу MongoDB
2. Указываем базу данных **details** и коллекцию **storage**, где будет происходить хранение данных.
3. С помощью функции get_weather_data_for_lat_and_lon мы получаем данные о погоде для конкретных координат (широта и долгота) с использованием сервиса VisualCrossing Weather API.
   - Функция выполняет GET-запрос к API с координатами и ключом API.
   - Результат JSON-ответа конвертируется в объект Python и возвращается.
4. В основной функции result_func определяются широта и долгота для центра Москвы.
   - Внутри функции вызывается get_weather_data_for_lat_and_lon для получения данных о погоде.
   - Результат сохраняется в файл 'result.json' и затем вставляется в созданную коллекцию MongoDB.
5. На последнем шаге вызывается функция result_func(), чтобы запустить весь алгоритм: получение данных о погоде, сохранение в файл и вставку в коллекцию MongoDB.

## OpenAPI

OpenAPI - спецификация для описания REST API нашего сервиса.

В рамках разработки для доступа к данным было выделено 2 сущности:
1. Taxi - имеет методы: 
   - **GET** - позволяет получить цену такси по выбранному времени и району.
2. District - имеет методы:
   - **GET** - позволяет получить название любого района
   - **PUT** - позволяет обновить название района
   - **POST** - позволяет добавить новый район

## Диаграммы

В рамках разработки сервиса были созданы диаграммы вида IDEF0, DFD и ER-диаграмма.
- [ ] Функциональная модель **IDEF0** представляет собой набор блоков, каждый из которых представляет собой «черный ящик» со входами и выходами, управлением и механизмами, которые декомпозируются до уровня описания этапов разработки. 

   Всего их 5: 
   1. Обработка и нормализация машиночитаемых данных из  интернета
   2. Отрисовка макетов и создание диаграмм как основы дальнейшей разработки
   3. Написание backend-части
   4. Написание frontend-части
   5. Проведение итоговой аналитики по проекту

- [ ] **Диаграмма DFD** наглядно отображает течение информации в пределах разрабатываемого сервиса. В нашем случае: течение информации от пользователя и нескольких баз данных с описанием этапов этого процесса.

- [ ] **Диаграмма ER** - разновидность блок-схемы, где показано, как разные сущности связаны между собой в рамках системы.
В рамках ее создания были выделены 2 основные сущности: **страница информации** и **главная страница** (содержащая в себе такие сущности, как **виджет с картой**, **строка** и **график**).

## Макеты
Макеты для создаваемого веб-сервиса были разработаны в программе Figma.

**Ссылка**: https://www.figma.com/file/8rduwYiap3Jgi7Z6uslFlx/%D0%9C%D0%B0%D0%BA%D0%B5%D1%82-Cabify?type=design&node-id=0-1&mode=design
